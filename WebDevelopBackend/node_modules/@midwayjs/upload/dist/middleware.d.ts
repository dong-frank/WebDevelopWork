/// <reference types="node" />
import { IMiddleware, ILogger, IgnoreMatcher } from '@midwayjs/core';
import { UploadOptions } from '.';
export declare class UploadMiddleware implements IMiddleware<any, any> {
    uploadConfig: UploadOptions;
    logger: ILogger;
    /**
     * cache global upload white list when uploadConfig.whitelist is set
     * @private
     */
    private uploadWhiteListMap;
    /**
     * cache global upload mime type white list when uploadConfig.mimeTypeWhiteList is set
     * @private
     */
    private uploadFileMimeTypeMap;
    match: IgnoreMatcher<any>[];
    ignore: IgnoreMatcher<any>[];
    init(): Promise<void>;
    resolve(app: any): (req: any, res: any, next: any) => Promise<any>;
    execUpload(ctx: any, req: any, res: any, next: any, isExpress: any): Promise<any>;
    getUploadBoundary(request: any): false | string;
    isReadableStream(req: any, isExpress: any): boolean;
    checkAndGetExt(filename: any, whiteListMap?: Map<string, string>): string | boolean;
    checkFileType(ext: string, data: Buffer, uploadFileMimeTypeMap?: Map<string, string[]>): Promise<{
        passed: boolean;
        mime?: string;
        current?: string;
    }>;
    static getName(): string;
}
//# sourceMappingURL=middleware.d.ts.map